- [Требования](#)
- [Сборка](#-1)
- [Использование](#-2)
   * [`install`](#install)
   * [`record`](#record)
   * [`transcribate`](#transcribate)
- [Логирование и хранение файлов](#---)
- [Конфигурация](#-3)
- [Сборка в единый исполняемый файл](#----)
- [Вклад](#-4)
- [Лицензия](#-5)

# Assist Me: CLI-инструмент для транскрибации аудио на macOS

Assist Me – это инструмент командной строки, который автоматизирует процесс записи и транскрибации аудио на macOS. Программа выполняет установку зависимостей, запись аудио, его конвертацию и транскрибацию с использованием [whisper.cpp](https://github.com/ggerganov/whisper.cpp), а также обеспечивает управление настройками с поддержкой интернационализации (i18n).

## Особенности

- **Установка:** Устанавливает необходимые пакеты (ffmpeg, blackhole и т.д.) через Homebrew и собирает проект whisper.cpp.
- **Запись:** Производит запись аудио с помощью ffmpeg с возможностью настройки входных и выходных аудиоустройств.
- **Транскрибация:** Конвертирует и транскрибирует записи с помощью whisper.cpp.
- **Режим потока:** Опционально можно настроить режим, при котором транскрибация выполняется сразу после завершения записи.
- **Управление настройками:** Обновление и получение конфигурационных параметров с помощью команд `env set` и `env get`.
- **Интернационализация:** Поддержка английского и русского языков (переводы загружаются из файла JSON).
- **Пользовательский конфиг:** Возможность указания пользовательского файла конфигурации через флаг `-c/--config`.

## Требования

- macOS
- Python 3.x
- Homebrew (для установки зависимостей)
- Git
- ffmpeg (устанавливается через Homebrew)
- PyYAML (`pip install pyyaml`)

## Установка

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/your-username/assistme-cli.git
   ```

2. Перейдите в директорию проекта:

   ```bash
   cd assistme-cli
   ```

3. (Опционально) Создайте виртуальное окружение и установите зависимости:

   ```bash
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   ```

4. Убедитесь, что у вас установлен Homebrew.

## Использование

### Основные команды

- **Установка зависимостей и сборка whisper.cpp:**

  ```bash
  ./cli.py env install
  ```

- **Запись аудио:**

  ```bash
  ./cli.py record
  ```
  
  Алиасы: `r` или `rec`

- **Транскрибация аудио:**

  ```bash
  ./cli.py transcribate
  ```
  
  Алиасы: `t` или `trb`

- **Запись с последующей транскрибацией (режим потока):**

  ```bash
  ./cli.py record --stream
  ```

- **Обновление настроек:**

  ```bash
  ./cli.py env set audio.input=:0 audio.output=:3 lang=ru
  ```

- **Получение значения настройки:**

  ```bash
  ./cli.py env get audio.input
  ```

### Глобальные опции

- **Выбор языка интерфейса:**

  Задайте язык с помощью флага `-l/--language`:

  ```bash
  ./cli.py -l ru record
  ```

- **Пользовательский файл конфигурации:**

  Укажите путь к файлу настроек через флаг `-c/--config`:

  ```bash
  ./cli.py -c /path/to/myconfig.yaml record
  ```

## Конфигурация

Файл конфигурации по умолчанию находится по пути `~/.assistme/config.yaml` и создается автоматически при первом запуске. В нем задаются параметры, такие как:

- **Язык:** `lang` (по умолчанию — "en")
- **Аудиоустройства:** `audio.input` и `audio.output`
- **Дополнительные опции:** например, `keep_source` (сохранять исходный файл) и `stream_mode` (автоматическая транскрибация после записи)

## Интернационализация

Все сообщения выводятся в соответствии с выбранным языком. Переводы хранятся в файле `translations.json` (расположен рядом со скриптом) и поддерживают английский (`en`) и русский (`ru`). Язык можно задать с помощью флага `-l/--language` или через файл конфигурации.

## Лицензия

Этот проект распространяется под лицензией MIT.

## Вклад

Ваши предложения, отчеты об ошибках и запросы на добавление новых функций приветствуются. Пожалуйста, создавайте issue или отправляйте pull request на [GitHub](https://github.com/your-username/assistme-cli).