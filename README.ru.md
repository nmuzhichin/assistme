- [Требования](#)
- [Сборка](#-1)
- [Использование](#-2)
   * [`install`](#install)
   * [`record`](#record)
   * [`transcribate`](#transcribate)
- [Логирование и хранение файлов](#---)
- [Конфигурация](#-3)
- [Сборка в единый исполняемый файл](#----)
- [Вклад](#-4)
- [Лицензия](#-5)

## Assist Me

Простой CLI-инструмент для автоматизации процесса настройки транскрибации аудио на macOS. Скрипт выполняет установку зависимостей, запись аудио, его конвертацию и транскрибацию с использованием [whisper.cpp](https://github.com/ggerganov/whisper.cpp). Все действия логируются, а временные файлы и результаты сохраняются в отдельной сессии.


## Требования

- macOS
- Python 3.8+
- Homebrew (для установки ffmpeg и blackhole)
- Git
- Пакет [PyYAML](https://pyyaml.org/) (установите через `pip install pyyaml`)

## Сборка

1. Убедитесь, что Python 3 установлен на вашей системе.
2. Склонируйте этот репозиторий:
   ```bash
   git clone https://github.com/nmuzhichin/assistme.git
   ```
3. Перейдите в каталог с проектом:
   ```bash
   cd assistme
   ```
4. (Опционально) Создайте виртуальное окружение и установите зависимости:
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   ```

## Использование

Скрипт поддерживает три основных команды:

### `install`

Команда выполняет следующие действия:
- Проверяет наличие Homebrew и устанавливает ffmpeg и blackhole-16ch.
- Клонирует репозиторий `whisper.cpp` в директорию `~/.assistme/whisper.cpp`.
- Скачивает модель `ggml-large-v2` (если она ещё не загружена).
- Собирает проект с помощью CMake (если бинарник `whisper-cli` ещё не создан).

Запуск:
```bash
./cli.py install
```

### `record`

Команда записывает аудио с помощью ffmpeg, используя параметры, заданные в конфигурационном файле `~/.assistme/config.yaml`.  
Если файл записи (`record.mp3`) уже существует, скрипт запросит подтверждение на его перезапись.

Запуск:
```bash
./cli.py record
```

### `transcribate`

Команда выполняет следующие действия:
- Перед конвертацией аудио запрашивает у пользователя название сессии, проверяя допустимые символы (латинские буквы, цифры, `_` и `-`).
- Переименовывает текущую рабочую директорию `session` в `session-{название}`.
- Конвертирует аудиофайл и запускает транскрибацию с помощью `whisper-cli`.
- Сохраняет результаты транскрибации в новой директории сессии.

Запуск:
```bash
./cli.py transcribate
```

## Логирование и хранение файлов

- Все логи записываются в файл `~/.assistme/log.txt`.
- Временные файлы (например, `record.mp3` и `output.wav`) и результаты транскрибации сохраняются в поддиректориях внутри `~/.assistme` (например, `session-{название}`).

## Конфигурация

Параметры для аудиоустройств задаются в файле `~/.assistme/config.yaml`. Если файла нет, он будет создан автоматически с дефолтными значениями:
```yaml
audio_input_1: ":0"   # микрофон
audio_input_2: ":3"   # системный звук через BlackHole 16ch
```

## Сборка в единый исполняемый файл

Сборка в единый бинарник осуществляется с помощью [PyInstaller](https://www.pyinstaller.org/):
```bash
pyinstaller --onefile cli.py
```

## Вклад

Если у вас есть предложения по улучшению, присылайте pull request или открывайте issue.

## Лицензия

Этот проект распространяется под лицензией MIT.
